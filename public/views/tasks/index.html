<h1>Your tasks</h1>

<section data-ng-controller="TasksController" data-ng-init="find()">
  <div task-form task="newTask" on-submit="create(task)" on-cancel="cancelEdit()"></div>

  <div class="container">
    <table class="table">
      <thead>
      <tr>
        <th>Task</th>
        <th><a href="" ng-click="predicate = 'due_date'; reverse=!reverse">Due date</a></th>
        <th><a href="" ng-click="predicate = 'priority'; reverse=!reverse">Priority</a></th>
        <th>#</th>
      </tr>
      </thead>
      <tbody>
      <tr data-ng-repeat="task in tasks | filter: {completed: false} | orderBy:predicate:reverse">
        <section data-ng-show="editingTask == task">
          <td colspan="4" data-ng-show="editingTask == task">
            <div task-form task="task" on-submit="update(task)" on-cancel="cancelEdit()"></div>
          </td>
        </section>

          <td data-ng-hide="editingTask == task">
            {{task.content}}
          </td>
          <td data-ng-hide="editingTask == task">{{task.due_date | date: 'shortDate'}}</td>
          <td data-ng-hide="editingTask == task">{{task.priority}}</td>
          <td data-ng-hide="editingTask == task">
            <span data-ng-click="complete(task)">Complete</span>
            <span data-ng-click="edit(task)">Edit</span>
            <span data-ng-click="remove(task)">Remove</span>
          </td>
      </tr>
      </tbody>

    </table>

    <h4>Completed</h4>
    <ul>
      <li data-ng-repeat="task in tasks | filter: {completed: true}">
        <div>{{task.content}}</div>
        <div data-ng-click="complete(task)">Restart</div>
        <div data-ng-click="remove(task)">Remove</div>
      </li>
    </ul>
  </div>
</section>
